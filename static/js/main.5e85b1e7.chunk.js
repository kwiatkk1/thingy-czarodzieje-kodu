(this["webpackJsonpthingy-czarodzieje-kodu"]=this["webpackJsonpthingy-czarodzieje-kodu"]||[]).push([[0],{103:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO4AAABBCAYAAADWpJgZAAAHQklEQVR42u3daWwUZRgH8P/z7ux2i1uqlRZbWmKQiJWotIIJRMAjkRi0HiQajxiPWI8mxisxaIz7wZRoJN6oeJAYY4xRIn7BAxHQaDxoa1AQadVAD4RedIEeOzuvHyq1tDvbXToznS3/37ftvvPOu8/us/O+szNPBTaUUlixYkXgy/Xdy7U2q7TGPAHO0EAYROQw3QNIq4h8g4Dx0aH4F9tTtZZkfwyrMxFWs5YkEnoNoOcyqERekw2hsNR09G5uSStxI2o+AjL1bsuy1gAwGECiCdOmDHXVofjmupSJG1bnICglV8PSnwBaMW5EE25/MJy7oLN3Y/NxS9n/17Rh5OaX5oul1zFpiXzjDLOv7/WRfxxK0AgWInEo8bCGPp2xIvIPDb08z7hs0fC//b+G1RoAbrLbeHlVB5Zf24H8fJORJHJYS3MO1q0txq7fpiR9XizrJgDfHbfGDapTkR9eUNLfG096Bqu6phXPvdzI6BK5qL9fYemCCuz89ZRkT/8a01vOO26qLMjHQNyaYddhzUPNjCqRy3JyLNx1b1vyIy4wY9QaN4BciJZ8uw5nlPYzqkQemFHWb7POlamjEpeIsgsTl4iJS0RMXCJi4hJNFq7dRDBVLRnX9j3WtqzqS0bcrpHq8fNr9uD2u9t8F68XXmvEnfe0ujaukf0de87pfWSioS6CJfMr0xqv12ObkMQ92QxeeGb/eDjLEgaMOFUm4lTZBWvf3Y055UdPePutP9Vn1H73rimovm2OI+Nyo6/Vq8rw7tvTseXHet+Py63Yu/VZ8fPnOOsSd075UVRcGDvh7TPdVkSn1e6cc49gXuVhz/vatzcH+/bmZMW43Iq9W58VP3+OOVUm4lTZ/x66f3ZG7Q8eCKXVbvWqmZhWOOBIX8/VzsS0wnjKNu0HgwCAG24+gEWLe3Ayx97+PSkbM47H3HjLASy8+JBnsfDT2LIicd9+vcSVfjd8PM2xvj5dn35fixb3jPrZ5WSLvRNxPH/eEU8T109j41SZiFNl91Vd3572dMWJvtoPBtP6ps2kr+++GbxDK1uOum7E3ol9lM894tvX7/bYsi5xH1m5z7Eze48+vnfMM64NdZG0EjeTvj58vwgfvl+UdYnrZOwnch+TYWxDU2WNRMC2ESfURJ4Q+4vqJBqNquOOuAaKoS2cn6x1JJKAYYzvt7ndu6ZkvI3dN5uTffnV7ztPgdbiSEwz6atsZj8KiwY8eR/d2kf99jzX9ufF6y843W4qrtWLtd/OBbADAIyQmo6QESiPxxOPJUvPWbN7x/1BPJEraewuznayL78az5VH4+nrkZX7Uk7fvYj9ePexdEGFr96XTF//rLPs882Mmy8VFFx5TWfnxh4V1ud+NhA36+zqKV++rIvzFyKPFBbFcd4Ftie2Lol39e05LXD5rUpDL4PNf+AzDI07qtsYTSIvZ1w1qU5a6iJLW+WSJ5fYLmDve6AFz7zQxEgSeSgeFyyZX4nfdiStrwwlUmt7vjg318KTT//NKBJ5LBjUiK76K2Ub28Tt7VV49umZjCKRxxIJQe1TZ6Zsk/ICjFefL0V1TStKyzIviD685MfWn+rHPC1+rISIUoO/ZXXF/VW6ZqyyLtt+rkvrAoxUZVKIAOCD96ajfntkzCPutwBMu7n2O28UezpoywISCb55dPJa+4r9jR0CdIugSfVL4+KAYVwkQHeyhl99XsBIEnmkoz2IhrqIXdJ+ryOB2d2Jr98xBqxm5OLsehH1jNbWqpGNG//I9de3kU/LzRA5oakx17bQoDKMmu7Ypo6hNe6A7EdQihuQZIoaiwVgmjLuyx6dkk75kIkoN0PkhM6OoN1T+sEnLv4lGt00tMYFtAWBmKnWnUTkPvtcEysajQ4968ltfemU/MjGsi7kT38hhB4Esnbs6fAkcSdrWReiicI7bYmykCdH3Krr21Pe5wkMVgfM5rIuRJMucdMp+ZHtZV2IOFUmook/4jopnfIhE1HWxclyM0STLnEnU1kXIk6ViXjEJRq0FyF0ZenFDEzcE5DpvabzKg/bbuPkfat+7YuIU2UiJi4RcY1LSf3j07eil9/tTFyytx9BBoE4VSaa9IlroRdaLNubYNtaWfmByAsdrcnvxxXo2KjETSAGw8ixvSzozVdLGFEil5mmYMPawqTPaUjLqDWuaXXC7OtrFsifGnrWyI1eWl2KttYQrrq2A3lTWTuVyGltLSG89VoJ9tQnv55dBNughx+B/5OnLgWAWmi9kmEk8pdAQC3tNjdvG5W4Sk1BJLK4ALH+Jg2cylAR+YMAX/boLVeMWuMCgGUdhXm4pVOUqgagGS4iX2iXnNA9o47Awx/E9QEEZfpOJcEuQJYNPyITkfdJi0Cgqmdg046UiQsAA7oZIsYPRiD/B9GyEAD/BwmR99PjTSonlDRpkeqIqpSBioo7g3samm7UlnWdQFdqSDGg+aMukfOJGtNAswi2KiUfdJtfb03V/l9YKg8DJI8iXQAAAABJRU5ErkJggg=="},109:function(e,t,r){e.exports=r.p+"static/media/thingy-product.3a8d5863.png"},121:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LightAndSound}));var _Users_krzysztof_kwiatkowsk_workspace_thingy_czarodzieje_kodu_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),components_ui_challenge_header__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(30),_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43),_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(79),_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(80),components_ui_code_editor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(46),_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(81),_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(51),_material_ui_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(37),notistack__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(29),notistack__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(notistack__WEBPACK_IMPORTED_MODULE_10__);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach((function(t){Object(_Users_krzysztof_kwiatkowsk_workspace_thingy_czarodzieje_kodu_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const useStyles=Object(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a)(e=>({iframeNode:{display:"block"}}));function LightAndSound(props){const defaultCode="// onGravityChange((y, x, z) => {\n//   if (x > 5) moveRight();\n//   if (x < -5) moveLeft();\n//   if (y > 5) moveUp();\n//   if (y < -5) moveDown();\n// })",editorText=localStorage.getItem("ledAndSound")||defaultCode,classes=useStyles(),_useSnackbar=Object(notistack__WEBPACK_IMPORTED_MODULE_10__.useSnackbar)(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;function handleCodeChange(e){localStorage.setItem("ledAndSound",e)}function executeCode(){const code=localStorage.getItem("ledAndSound"),writeLedColor=props.writeLedColor;function sleep(e){return new Promise(t=>setTimeout(t,e))}function changeColor(e){console.log("changeColor",e),writeLedColor(e,_objectSpread({},props.led.reading))}function onButtonPressed(e){window.thingyOnButtonPressed=e}try{eval("(async () => {;\n"+code+'\n;})().catch(e => { enqueueSnackbar("Ups... wygl\u0105da na to, \u017ce kod jest niepoprawny :(", { variant: "error", preventDuplicate: true }); })'),enqueueSnackbar("Kod wczytany!",{variant:"success",preventDuplicate:!0})}catch(e){console.error(e),enqueueSnackbar("Ups... wygl\u0105da na to, \u017ce kod jest niepoprawny :(",{variant:"error",preventDuplicate:!0})}}return Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{props.onStart()},[props.connected]),Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{!!props.buttonPressed&&"function"===typeof window.thingyOnButtonPressed&&window.thingyOnButtonPressed()},[props.buttonPressed]),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(components_ui_challenge_header__WEBPACK_IMPORTED_MODULE_2__.a,{text:"Dioda LED i g\u0142o\u015bnik"}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_3__.a,{square:!0},JSON.stringify(props.led)),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_4__.a,{className:classes.card},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_5__.a,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(components_ui_code_editor__WEBPACK_IMPORTED_MODULE_6__.a,{onChange:handleCodeChange,value:editorText})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_7__.a,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_8__.a,{onClick:executeCode,size:"small",variant:"contained",color:"primary"},"Wykonaj"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_8__.a,{size:"small",color:"primary"},"Wyczy\u015bc"))))}},123:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DinosaurGame}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51),_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(43),_material_ui_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(37),_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(79),_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(80),_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(81),components_ui_code_editor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(46),components_ui_challenge_header__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(30),notistack__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(29),notistack__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(notistack__WEBPACK_IMPORTED_MODULE_9__),_package_json__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(47),_package_json__WEBPACK_IMPORTED_MODULE_10___namespace=__webpack_require__.t(47,1);const useStyles=Object(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__.a)(e=>({iframeNode:{display:"block"}}));function DinosaurGame(props){const defaultCode="// jumpStart();\n\n// onButtonPressed(jumpStart)\n\n// onTap(() => console.log('tap!'));\n\n// onTap(jumpStart);",dinoGameText=localStorage.getItem("dinoGame")||defaultCode,_useSnackbar=Object(notistack__WEBPACK_IMPORTED_MODULE_9__.useSnackbar)(),enqueueSnackbar=_useSnackbar.enqueueSnackbar,classes=useStyles();function send(e){document.querySelector("#trex-game-iframe").contentWindow.postMessage({cmd:e})}function handleCodeChange(e){localStorage.setItem("dinoGame",e)}function executeCode(){const code=localStorage.getItem("dinoGame");function jumpStart(){send("JUMP_PRESSED")}function jumpEnd(){send("JUMP_RELEADED")}function onButtonPressed(e){window.thingyOnButtonPressed=e}function onTap(e){window.thingyOnTap=e}eval(code)}return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>(props.connected&&props.onStart(),()=>{props.connected&&props.onEnd()}),[props.connected]),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{!!props.buttonPressed&&"function"===typeof window.thingyOnButtonPressed&&window.thingyOnButtonPressed()},[props.buttonPressed]),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{"function"===typeof window.thingyOnTap&&window.thingyOnTap()},[props.tapCount,props.tapDirection]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_ui_challenge_header__WEBPACK_IMPORTED_MODULE_8__.a,{text:"Gra: Thingozaurus-Rex"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_2__.a,{square:!0},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("iframe",{src:`${"localhost"!==window.location.hostname?_package_json__WEBPACK_IMPORTED_MODULE_10__.a:""}/trex-game/dino.game.html`,id:"trex-game-iframe",width:"100%",height:320,frameBorder:0,className:classes.iframeNode})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_4__.a,{className:classes.card},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_5__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_ui_code_editor__WEBPACK_IMPORTED_MODULE_7__.a,{onChange:handleCodeChange,value:dinoGameText})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_6__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1__.a,{onClick:executeCode,size:"small",variant:"contained",color:"primary"},"Wykonaj"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1__.a,{size:"small",color:"primary"},"Wyczy\u015bc"))))}},124:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BallGame}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51),_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(43),_material_ui_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(37),_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(79),_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(80),_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(81),components_ui_code_editor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(46),components_ui_challenge_header__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(30),notistack__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(29),notistack__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(notistack__WEBPACK_IMPORTED_MODULE_9__),_package_json__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(47),_package_json__WEBPACK_IMPORTED_MODULE_10___namespace=__webpack_require__.t(47,1);const useStyles=Object(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__.a)(e=>({iframeNode:{display:"block"}}));function BallGame(props){const defaultCode="// onGravityChange((y, x, z) => {\n//   if (x > 5) moveRight();\n//   if (x < -5) moveLeft();\n//   if (y > 5) moveUp();\n//   if (y < -5) moveDown();\n// })",ballGameText=localStorage.getItem("ballGame")||defaultCode,classes=useStyles(),_useSnackbar=Object(notistack__WEBPACK_IMPORTED_MODULE_9__.useSnackbar)(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;function send(e){document.querySelector("#trex-game-iframe").contentWindow.postMessage({cmd:e})}function handleCodeChange(e){localStorage.setItem("ballGame",e)}function executeCode(){const code=localStorage.getItem("ballGame");function moveRight(){send("MOVE_RIGHT")}function moveLeft(){send("MOVE_LEFT")}function moveUp(){send("MOVE_UP")}function moveDown(){send("MOVE_DOWN")}function onGravityChange(e){window.thingyOnGravityChange=e}try{eval(code),enqueueSnackbar("Kod wczytany!",{variant:"success",preventDuplicate:!0})}catch(e){console.error(e),enqueueSnackbar("Ups... wygl\u0105da na to, \u017ce kod jest niepoprawny :(",{variant:"error",preventDuplicate:!0})}}return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>(props.connected&&props.onStart(),()=>{props.connected&&props.onEnd()}),[props.connected]),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const e=props.gravity,t=e.x,r=e.y,n=e.z;"function"===typeof window.thingyOnGravityChange&&window.thingyOnGravityChange(t,r,n)},[props.gravity]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_ui_challenge_header__WEBPACK_IMPORTED_MODULE_8__.a,{text:"Gra: Kulka-Thingulka"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_2__.a,{square:!0},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("iframe",{src:`${"localhost"!==window.location.hostname?_package_json__WEBPACK_IMPORTED_MODULE_10__.a:""}/ball-game/index.html`,id:"trex-game-iframe",width:"100%",height:320,frameBorder:0,className:classes.iframeNode})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_4__.a,{className:classes.card},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_5__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_ui_code_editor__WEBPACK_IMPORTED_MODULE_7__.a,{onChange:handleCodeChange,value:ballGameText})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_6__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1__.a,{onClick:executeCode,size:"small",variant:"contained",color:"primary"},"Wykonaj"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1__.a,{size:"small",color:"primary"},"Wyczy\u015b\u0107"))))}},132:function(e,t,r){e.exports=r(185)},157:function(e,t,r){},185:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),a=r(7),o=r.n(a),s=r(219),c=r(150),d=r(16),_=r(37),u=r(6),h=r(216),l=r(215),g=r(221),E=r(213),m=r(214),p=r(55),f=r(103),y=r.n(f);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach((function(t){Object(u.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){const t=e.icon,r=e.primary,n=e.secondary,a=e.to,o=i.a.useMemo(()=>i.a.forwardRef((e,t)=>i.a.createElement(p.b,Object.assign({to:a},e,{innerRef:t}))),[a]);return i.a.createElement("li",null,i.a.createElement(g.a,{button:!0,component:o},t?i.a.createElement(E.a,null,t):null,i.a.createElement(m.a,{primary:r,secondary:n})))}const D=Object(_.a)(e=>({toolbar:v({},e.mixins.toolbar,{backgroundColor:e.palette.primary.main,padding:e.spacing(1),textAlign:"center"}),toolbarImg:{maxHeight:"100%",maxWidth:"100%"}}));function U(e){const t=D();return i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:t.toolbar},i.a.createElement("img",{src:y.a,alt:"Czarodzieje Kodu",className:t.toolbarImg})),i.a.createElement(l.a,null),i.a.createElement(h.a,null,e.items.map(e=>i.a.createElement(w,{key:e.path,to:e.path,primary:e.primary,secondary:e.secondary})),i.a.createElement(l.a,null)))}var O=r(220),C=r(38),I=r(50),T=r(109),P=r.n(T);const M=Object(_.a)(e=>({root:{display:"flex",alignItems:"center",justifyContent:"center",flexFlow:"column",width:"100%",height:"80vh",textAlign:"center"},thingyName:{color:"#ccc"}}));function S(){const e=M(),t=localStorage.getItem("thingyName");return i.a.createElement("div",{className:e.root},i.a.createElement("img",{src:P.a,alt:""}),i.a.createElement("div",{className:e.message},i.a.createElement(I.a,{variant:"h5"},"Ups, Twoje Thingy nie jest po\u0142\u0105czone!"),t?i.a.createElement(I.a,{variant:"h6",className:e.thingyName},t):null))}const A=(e,t)=>({type:"RECEIVE_NEW_READING",reading:{feature:e,reading:t}}),k=(e,t)=>({type:"RECEIVE_NEW_NOTIFY_READING",reading:{feature:e,reading:t}}),R=(e,t)=>({type:"NOTIFY_FEATURE_STATUS",status:{feature:e,status:t}}),L=(e,t)=>({type:"NOTIFY_USER",message:e,category:t}),x=(e,t="both",r=!1)=>async(n,i)=>{try{if("gas"===e)return void n(B(["tvoc","co2"],t));const a=await i(),o=a.thingy[e].status,s=a.thingy[e].hasEventListener||!1;if("both"===t||"on"===t&&!o||"off"===t&&o){const t=e;if(["tvoc","co2"].includes(e)){const r="tvoc"===e?"co2":"tvoc";if(a.thingy[r].status)return void n(R(t,!o));e="gas"}let i;r?(o||await window.thingy.mtu.write(276),i=e=>{const t=e.detail;window.thingy.microphone.play(t)}):i=t=>{n(k(e,t))},o?(await window.thingy[e].stop(),n(R(t,!1))):(s||(window.thingy.addEventListener(e,i),n((e=>({type:"SET_FEATURE_HAS_EVENT_LISTENER",feature:e}))(e))),await window.thingy[e].start(),n(R(t,!0)))}}catch(a){return void("Cannot read property 'gattBusy' of undefined"!==a.message||a.message)}},B=(e,t="both")=>async r=>{for(const n of e)await r(x(n,t))},W=e=>async t=>{try{const r=await window.thingy[e].read();t(A(e,r))}catch(r){return}},j=(e,t)=>async r=>{try{await window.thingy[e].write(t);const n=await window.thingy[e].read();r(A(e,n))}catch(n){console.error(n)}},N=e=>t=>{t(A("connected",e))};function K(e,t){for(const r in t)Object.defineProperty(e,r,{configurable:!0,value:t[r]})}const q=(e,...t)=>(class extends e{constructor(...e){super(e);const t=document.createDocumentFragment();this.addEventListener=(e,...r)=>t.addEventListener(e,...r),this.removeEventListener=(...e)=>t.removeEventListener(...e),this.dispatchEvent=e=>{K(e,{currentTarget:this}),e.target||K(e,{target:this});const r=`on${e.type}`;"function"===typeof this[r]&&this[r](e);const n=t.dispatchEvent(e);return n&&this.parentNode&&this.parentNode.dispatchEvent(e),K(e,{currentTarget:null,target:null}),n}}});class z extends(q(Object)){}var G=class extends z{constructor(e){super(),this.device=e}async wait(e){return new Promise(t=>setTimeout(t,e))}processEvent(e,t,r,n=this.device){let i;switch(!0){case e===t||"operationdiscarded"===e:i=r;break;default:i={feature:t,body:r}}const a=new CustomEvent(e,{detail:i});n.dispatchEvent(a)}};var F=class{constructor(e){this.setDevice(e),this.utilities=new G(e),this._initialize()}_initialize(){void 0===window.thingyController&&(window.thingyController={}),void 0===window.thingyController[this.tid]&&(window.thingyController[this.tid]={}),void 0===window.thingyController[this.tid].gattStatus&&(window.thingyController[this.tid].gattStatus=!0),void 0===window.thingyController[this.tid].queuedOperations&&(window.thingyController[this.tid].queuedOperations=[]),void 0===window.thingyController[this.tid].executingQueuedOperations&&(window.thingyController[this.tid].executingQueuedOperations=!1),void 0===window.thingyController[this.tid].executedOperations&&(window.thingyController[this.tid].executedOperations=[])}addExecutedOperation(e,t){this.device.getConnected()&&window.thingyController[this.tid].executedOperations.push({feature:e,method:t})}clearExecutedOperations(){window.thingyController[this.tid].executedOperations=[]}setGattStatus(e){this.device.getConnected()&&(window.thingyController[this.tid].gattStatus=e,e&&this.utilities.processEvent("gattavailable"))}getGattStatus(){if(this.device.getConnected())return window.thingyController[this.tid].gattStatus}getNumQueuedOperations(){if(this.device.getConnected())return window.thingyController[this.tid].queuedOperations.length}getQueuedOperation(e){if(this.device.getConnected()&&window.thingyController[this.tid].queuedOperations.length>=e)return window.thingyController[this.tid].queuedOperations[e]}removeQueuedOperation(e){if(this.device.getConnected())if(Number.isInteger(e))window.thingyController[this.tid].queuedOperations.splice(e,1);else for(let t=0;t<this.getNumQueuedOperations();t++){const r=this.getQueuedOperation(t);e.feature===r.feature&&e.method===r.method&&(this.removeQueuedOperation(t),t--)}}enqueue(e,t,r){this.device.getConnected()&&(window.thingyController[this.tid].queuedOperations.push({feature:e,method:t,f:r}),this.utilities.processEvent("operationqueued"))}dequeue(){if(this.device.getConnected())return window.thingyController[this.tid].queuedOperations.shift()}setExecutingQueuedOperations(e){this.device.getConnected()&&(window.thingyController[this.tid].executingQueuedOperations=e,e&&this.clearExecutedOperations())}getExecutingQueuedOperations(){if(this.device.getConnected())return window.thingyController[this.tid].executingQueuedOperations}getDevice(){return this.device}setDevice(e){this.device=e,this.tid=e.device.id}getExecutedOperation(e){if(this.device.getConnected())return window.thingyController[this.tid].executedOperations[e]}getNumExecutedOperations(){if(this.device.getConnected())return window.thingyController[this.tid].executedOperations.length}terminate(){window.thingyController[this.tid]=void 0}};var V=class{constructor(e,t){this.device=e,this.utilities=new G(this.device),this.type=t||this.constructor.name,this.latestReading=new Map}async _connect(){if("thingyController"in this||(this.thingyController=new F(this.device)),this.thingyController.addExecutedOperation(this.type,"connect"),"connected"in this.characteristic&&this.characteristic.connected)return this.device.logEnabled&&console.log(`You're already connected to the ${this.type} feature`),!0;if(!this.thingyController.getGattStatus())return this.thingyController.enqueue(this.type,"connect",this._connect.bind(this)),!1;try{return this.thingyController.setGattStatus(!1),this.service.service=await this.device.server.getPrimaryService(this.service.uuid),this.characteristic.characteristic=await this.service.service.getCharacteristic(this.characteristic.uuid),this.thingyController.setGattStatus(!0),this.characteristic.connected=!0,this.characteristic.notifying=!1,this.characteristic.hasEventListener=!1,this.device.logEnabled&&console.log(`Connected to the ${this.type} feature`),!0}catch(e){return"thingyController"in this&&(this.thingyController.setGattStatus(!0),this.thingyController.enqueue(this.type,"connect",this._connect.bind(this))),this.characteristic.connected=!1,"utilities"in this&&this.utilities.processEvent("error",this.type,e),!1}}async _read(e=!1){try{let t=0,r=0,n=!1;for(this.characteristic.connected||await this._connect();!this.characteristic.connected;){if(250===++t){const e=new Error(`As we couldn't connect to the ${this.type} feature, the read operation can't be executed`);return this.utilities.processEvent("error",this.type,e),!1}await this.utilities.wait(20)}if(this.thingyController.addExecutedOperation(this.type,"read"),!this.hasProperty("read")){const e=new Error(`The ${this.type} feature does not support the read method`);return this.utilities.processEvent("error",this.type,e),!1}if(!this.characteristic.decoder){const e=new Error("The characteristic you're trying to read does not have a specified decoder");return this.utilities.processEvent("error",this.type,e),!1}for(;!1===n;){if(250===++r){const e=new Error("We could not process your read request at the moment due to high operational traffic");return this.utilities.processEvent("error",this.type,e),!1}if(this.thingyController.getGattStatus()){this.thingyController.setGattStatus(!1);let t=await this.characteristic.characteristic.readValue();this.thingyController.setGattStatus(!0),!0!==e&&(t=await this.characteristic.decoder(t)),n=t}else await this.utilities.wait(20)}return n}catch(t){return this.thingyController.setGattStatus(!0),this.utilities.processEvent("error",this.type,t),!1}}async _write(e){try{if(void 0===e){const e=new Error("You have to write a non-empty body");return this.utilities.processEvent("error",this.type,e),!1}let t=0,r=0,n=!1;for(this.characteristic.connected||await this._connect();!this.characteristic.connected;){if(250===++t){const e=new Error(`As we couldn't connect to the ${this.type} feature, the write operation can't be executed`);return this.utilities.processEvent("error",this.type,e),!1}await this.utilities.wait(20)}if(this.thingyController.addExecutedOperation(this.type,"write"),!this.hasProperty("write")&&!this.hasProperty("writeWithoutResponse")){const e=new Error(`The ${this.type} feature does not support the write or writeWithoutResponse method`);return this.utilities.processEvent("error",this.type,e),!1}if(!this.characteristic.encoder){const e=new Error("The characteristic you're trying to write does not have a specified encoder");return this.utilities.processEvent("error",this.type,e),!1}for(;!1===n;){if(250===++r){const e=new Error("We could not process your read request at the moment due to high operational traffic");return this.utilities.processEvent("error",this.type,e),!1}if(this.thingyController.getGattStatus()){const t=await this.characteristic.encoder(e);this.thingyController.setGattStatus(!1),await this.characteristic.characteristic.writeValue(t),this.thingyController.setGattStatus(!0),this.utilities.processEvent("write",this.type,e),n=!0}else await this.utilities.wait(20)}return n}catch(t){return this.thingyController.setGattStatus(!0),this.utilities.processEvent("error",this.type,t),!1}}async _notify(e,t=!1){if(!0!==e&&!1!==e){const e=new Error("You have to specify the enable parameter (true/false)");return void this.utilities.processEvent("error",this.type,e)}if(!this.characteristic.connected){if(!await this._connect())return this.thingyController.enqueue(this.type,e?"start":"stop",this._notify.bind(this,e,t)),!1}if(this.thingyController.addExecutedOperation(this.type,e?"start":"stop"),!this.hasProperty("notify")&&!this.hasProperty("indicate")){const e=new Error(`The ${this.type} feature does not support the start/stop methods`);return void this.utilities.processEvent("error",this.type,e)}if(e===this.characteristic.notifying)return this.device.logEnabled&&console.log(`The ${this.type} feature has already ${this.characteristic.notifying?"enabled":"disabled"} notifications`),!0;if(!this.characteristic.decoder){const e=new Error("The characteristic you're trying to notify does not have a specified decoder");return void this.utilities.processEvent("error",this.type,e)}const r=async e=>{try{const r=await this.characteristic.decoder(e.target.value);t||this.utilities.processEvent(this.type,this.type,r)}catch(r){this.utilities.processEvent("error",this.type,r)}},n=this.characteristic.characteristic;if(!this.thingyController.getGattStatus())return this.thingyController.enqueue(this.type,e?"start":"stop",this._notify.bind(this,e,t)),!1;if(this.thingyController.setGattStatus(!1),e)try{const e=await n.startNotifications();return this.thingyController.setGattStatus(!0),this.characteristic.hasEventListener||(e.addEventListener("characteristicvaluechanged",r.bind(this)),this.characteristic.hasEventListener=!0),this.characteristic.notifying=!0,this.device.logEnabled&&console.log(`Notifications enabled for the ${this.type} feature`),!0}catch(i){return this.thingyController.setGattStatus(!0),this.thingyController.enqueue(this.type,e?"start":"stop",this._notify.bind(this,e,t)),this.characteristic.notifying=!1,this.utilities.processEvent("error",this.type,i),!1}else try{await n.stopNotifications();return this.thingyController.setGattStatus(!0),this.characteristic.notifying=!1,"microphone"===this.type&&this.audioCtx&&this.suspendAudioContext(),this.device.logEnabled&&console.log(`Notifications disabled for the ${this.type} feature`),!0}catch(i){return this.thingyController.setGattStatus(!0),this.thingyController.enqueue(this.type,e?"start":"stop",this._notify.bind(this,e,t)),this.characteristic.notifying=!0,this.utilities.processEvent("error",this.type,i),!1}}hasProperty(e){return!0===this.characteristic.characteristic.properties[e]}async start(){return await this._notify(!0)}async stop(){return await this._notify(!1)}async read(){return await this._read()}async write(e){return await this._write(e)}};var Q=class extends V{constructor(e){super(e,"advertisingparameters"),this.service={uuid:this.device.TCS_UUID},this.characteristic={uuid:this.device.TCS_ADV_PARAMS_UUID,decoder:this.decodeAdvertisingParam.bind(this),encoder:this.encodeAdvertisingParam.bind(this)}}decodeAdvertisingParam(e){try{const t=!0;return{interval:(.625*e.getUint16(0,t)).toFixed(0),timeout:e.getUint8(2)}}catch(t){throw t}}async encodeAdvertisingParam(e){try{if("object"!==typeof e){throw new Error("The argument has to be an object.")}if(void 0===e.interval&&void 0===e.timeout){throw new RangeError("The argument has to be an object with at least one of the properties 'interval' or 'timeout': {interval: someInterval, timeout: someTimeout}")}let t=e.interval,r=e.timeout;if(void 0!==t){if(t<20||t>5e3){throw new RangeError("The advertising interval must be within the range of 20 ms to 5 000 ms")}t*=1.6}if(void 0!==r&&(r<0||r>180)){throw new RangeError("The advertising timeout must be within the range of 0 to 180 s")}const n=await this._read(!0),i=!0;t=t||n.getUint16(0,i),r=r||n.getUint8(2,i);const a=new Uint8Array(3);for(let e=0;e<a.length;e++)a[e]=n.getUint8(e);return a[0]=255&t,a[1]=t>>8&255,a[2]=r,a}catch(t){throw t}}};var J=class extends V{constructor(e,t=[]){super(e,"microphone"),this.service={uuid:this.device.TSS_UUID},this.characteristic={uuid:this.device.TSS_MIC_UUID,decoder:this.decodeMicrophoneData.bind(this)};const r=window.AudioContext||window.webkitAudioContext;this.audioCtx=new r,this._MICROPHONE_INDEX_TABLE=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],this._MICROPHONE_STEP_SIZE_TABLE=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],this.suspendAudioContext=this.suspendAudioContext.bind(this)}async suspendAudioContext(){await this.audioCtx.suspend()}decodeMicrophoneData(e){const t=e.buffer,r={header:new DataView(t.slice(0,3)),data:new DataView(t.slice(3))};return this._decodeAudio(r)}async verifyMicrophoneAction(){try{await this.device.mtu._write(140)}catch(e){throw e}}async verifyMicrophoneReaction(e){if(this.getGattAvailable())try{const t=e.detail.data;if(await this._notify(!1,!0),this.removeEventListener("verifyReaction",this.characteristic.verifyReaction),131!==t.byteLength){console.log(t.byteLength);const e=new Error("Your device does not currently support the use of Thingy's microphone. Check back at a later date.");throw this.notifyError(e),e}await this._notify(!0)}catch(t){throw t}}_decodeAudio(e){try{const t=e.data.byteLength,r=new ArrayBuffer(512),n=new DataView(r);let i,a,o=!1,s=0,c=0,d=0,_=e.header.getInt16(0,!1),u=e.header.getInt8(2);u<0&&(u=0),u>88&&(u=88),a=this._MICROPHONE_STEP_SIZE_TABLE[u];for(let h=0,l=0;h<t;l+=2)o?(c=15&s,h++):c=(s=e.data.getInt8(h))>>4&15,o=!o,(u+=this._MICROPHONE_INDEX_TABLE[c])<0&&(u=0),u>88&&(u=88),d=8&c,i=a>>3,(4&(c&=7))>0&&(i+=a),(2&c)>0&&(i+=a>>1),(1&c)>0&&(i+=a>>2),d>0?_-=i:_+=i,_>32767?_=32767:_<-32768&&(_=-32768),a=this._MICROPHONE_STEP_SIZE_TABLE[u],n.setInt16(l,_,!0);return n}catch(t){throw t}}play(e){void 0===this._audioStack&&(this._audioStack=[]),this._audioStack.push(e),this._audioStack.length&&this._scheduleAudioBuffers()}_scheduleAudioBuffers(){for(;this._audioStack.length>0;){const e=.01,t=this._audioStack.shift(),r=1,n=t.byteLength/2;void 0===this._audioNextTime&&(this._audioNextTime=0),"suspended"===this.audioCtx.state&&this.audioCtx.resume();const i=this.audioCtx.createBuffer(r,n,16e3),a=i.getChannelData(0);for(let s=0;s<t.byteLength/2;s++)a[s]=t.getInt16(2*s,!0)/32768;const o=this.audioCtx.createBufferSource();o.buffer=i,o.connect(this.audioCtx.destination),0===this._audioNextTime&&(this._audioNextTime=this.audioCtx.currentTime+e),o.start(this._audioNextTime),this._audioNextTime+=o.buffer.duration}}};var Y=class extends V{constructor(e){super(e,"mtu"),this.service={uuid:this.device.TCS_UUID},this.characteristic={uuid:this.device.TCS_MTU_REQUEST_UUID,decoder:this.decodeMtu.bind(this),encoder:this.encodeMtu.bind(this)}}decodeMtu(e){try{const t=!0;return e.getUint16(1,t)}catch(t){throw t}}encodeMtu(e,t=!0){try{if(e<23||e>276){throw new Error("MTU size must be in range 23 - 276 bytes")}const r=new Uint8Array(3);return r[0]=t?1:0,r[1]=255&e,r[2]=e>>8&255,r}catch(r){throw r}}};var H=class extends V{constructor(e){super(e,"name"),this.service={uuid:this.device.TCS_UUID},this.characteristic={uuid:this.device.TCS_NAME_UUID,decoder:this.decodeName.bind(this),encoder:this.encodeName.bind(this)}}decodeName(e){try{return{name:(new TextDecoder).decode(e)}}catch(t){throw t}}encodeName(e){try{if(e.length>10)return Promise.reject(new TypeError("The name can't be more than 10 characters long."));const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t}catch(t){throw t}}};var Z=class extends V{constructor(e){super(e,"temperature"),this.service={uuid:this.device.TES_UUID},this.characteristic={uuid:this.device.TES_TEMP_UUID,decoder:this.decodeTemperature.bind(this)}}decodeTemperature(e){try{return{value:e.getInt8(0)+e.getUint8(1)/100,unit:"Celsius"}}catch(t){throw t}}};var X=class extends V{constructor(e){super(e,"pressure"),this.service={uuid:this.device.TES_UUID},this.characteristic={uuid:this.device.TES_PRESSURE_UUID,decoder:this.decodePressureData.bind(this)}}decodePressureData(e){try{const t=!0;return{value:e.getUint32(0,t)+e.getUint8(4)/100,unit:"hPa"}}catch(t){throw t}}};var $=class extends V{constructor(e){super(e,"led"),this.service={uuid:this.device.TUIS_UUID},this.characteristic={uuid:this.device.TUIS_LED_UUID,decoder:this.decodeLedData.bind(this),encoder:this.encodeLedData.bind(this)}}decodeLedData(e){try{const t=e.getUint8(0),r=!0;let n;switch(t){case 0:n={mode:t};break;case 1:n={mode:t,r:e.getUint8(1),g:e.getUint8(2),b:e.getUint8(3)};break;case 2:n={mode:t,color:e.getUint8(1),intensity:e.getUint8(2),delay:e.getUint16(3,r)};break;case 3:n={mode:t,color:e.getUint8(1),intensity:e.getUint8(2)}}return n}catch(t){throw t}}encodeLedData(e){try{let t;if(!e.mode){throw new Error("You must specify a LED mode")}switch(e.mode){case"constant":if(void 0===e.red||void 0===e.green||void 0===e.blue){throw new Error("The options object for constant mode must contain the properties 'red', 'green', and 'blue'.")}if(e.red<0||e.red>255||e.green<0||e.green>255||e.blue<0||e.blue>255){throw new Error("The color values must be in the range 0 - 255")}t=new Uint8Array([1,e.red,e.green,e.blue]);break;case"breathe":{if(void 0===e.color||void 0===e.intensity||void 0===e.delay){throw new Error("The options object for breathe mode must have the properties 'color', 'intensity' and 'delay'.")}const r=["red","green","yellow","blue","purple","cyan","white"];let n;if(r.indexOf(e.color)>-1)n=r.indexOf(e.color)+1;else{if(!("number"===typeof e.color&&e.color>0&&e.color<8)){throw new Error(`The color must either be a recognized color (${r.join(", ")}), or an integer in the interval 1 - 7`)}n=e.color}if(e.intensity<0||e.intensity>100){throw new Error("The intensity must be an integer in the interval 0 - 100")}if(e.delay<50||e.delay>1e4){throw new Error("The delay must be an integer in the interval 50 - 10 000")}t=new Uint8Array([2,n,e.intensity,255&e.delay,e.delay>>8&255]);break}case"oneshot":if(void 0===e.color||void 0===e.intensity){throw new Error("The options object for the one shot mode must have the properties 'color' and 'intensity.")}if(e.color<1||e.color>7){throw new Error("The color must either be a recognized color or an integer in the interval 1 - 7")}if(e.intensity<0||e.intensity>100){throw new Error("The intensity must be an integer in the interval 0 - 100")}t=new Uint8Array([3,e.color,e.intensity]);break;case"off":t=new Uint8Array([0]);break;default:t=new Uint8Array([2,6,20,3500])}return t}catch(t){throw t}}};var ee=class extends V{constructor(e){super(e,"tap"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_TAP_UUID,decoder:this.decodeTapData.bind(this)}}decodeTapData(e){try{return{direction:e.getUint8(0),count:e.getUint8(1)}}catch(t){throw t}}};var te=class extends V{constructor(e){super(e,"absoluteorientation"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_ORIENTATION_UUID,decoder:this.decodeOrientationData.bind(this)}}decodeOrientationData(e){try{return{orientation:e.getUint8(0)}}catch(t){throw t}}};var re=class extends V{constructor(e){super(e,"quaternionorientation"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_QUATERNION_UUID,decoder:this.decodeQuaternionData.bind(this)}}decodeQuaternionData(e){try{const t=!0;let r=e.getInt32(0,t)/(1<<30),n=e.getInt32(4,t)/(1<<30),i=e.getInt32(8,t)/(1<<30),a=e.getInt32(12,t)/(1<<30);const o=Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2)+Math.pow(a,2));return 0!==o&&(r/=o,n/=o,i/=o,a/=o),{w:r,x:n,y:i,z:a}}catch(t){throw t}}};var ne=class extends V{constructor(e){super(e,"button"),this.service={uuid:this.device.TUIS_UUID},this.characteristic={uuid:this.device.TUIS_BTN_UUID,decoder:this.decodeButtonData.bind(this)}}decodeButtonData(e){try{return{value:e.getUint8(0)}}catch(t){throw t}}};var ie=class extends V{constructor(e){super(e,"cloudtoken"),this.service={uuid:this.device.TCS_UUID},this.characteristic={uuid:this.device.TCS_CLOUD_TOKEN_UUID,decoder:this.decodeCloudToken.bind(this),encoder:this.encodeCloudToken.bind(this)}}decodeCloudToken(e){try{return{token:(new TextDecoder).decode(e)}}catch(t){throw t}}encodeCloudToken(e){try{if(e.length>250){throw new Error("The length of the cloud token can not exceed 250 characters.")}return(new TextEncoder).encode(e)}catch(t){throw t}}};var ae=class extends V{constructor(e){super(e,"color"),this.service={uuid:this.device.TES_UUID},this.characteristic={uuid:this.device.TES_COLOR_UUID,decoder:this.decodeColorData.bind(this)}}decodeColorData(e){try{const t=!0,r=e.getUint16(0,t),n=e.getUint16(2,t),i=e.getUint16(4,t),a=e.getUint16(6,t),o=300;let s=(a-o)/(400-o);s<0&&(s=0);let c=255*(r/(r+n+i))*3*s;c>255&&(c=255);let d=255*(n/(r+n+i))*3*s;d>255&&(d=255);let _=255*(i/(r+n+i))*3*s;return _>255&&(_=255),{red:parseInt(c.toFixed(0)),green:parseInt(d.toFixed(0)),blue:parseInt(_.toFixed(0))}}catch(t){throw t}}};var oe=class extends V{constructor(e){super(e,"connectionparameters"),this.service={uuid:this.device.TCS_UUID},this.characteristic={uuid:this.device.TCS_CONN_PARAMS_UUID,decoder:this.decodeConnectionParam.bind(this),encoder:this.encodeConnectionParam.bind(this)}}decodeConnectionParam(e){try{const t=!0;return{minInterval:1.25*e.getUint16(0,t),maxInterval:1.25*e.getUint16(2,t),slaveLatency:e.getUint16(4,t),timeout:10*e.getUint16(6,t)}}catch(t){throw t}}async encodeConnectionParam(e){try{if("object"!==typeof e){throw new Error("The argument has to be an object.")}if(void 0===e.timeout&&void 0===e.slaveLatency&&void 0===e.minInterval&&void 0===e.maxInterval){throw new Error("The argument has to be an object with at least one of the properties 'timeout', 'slaveLatency', 'minInterval' or 'maxInterval'.")}let t=e.timeout,r=e.slaveLatency,n=e.minInterval,i=e.maxInterval;if(void 0!==t){if(t<100||t>32e3){throw new Error("The supervision timeout must be in the range from 100 ms to 32 000 ms.")}t=Math.round(t/10)}if(void 0!==r&&(r<0||r>499)){throw new Error("The slave latency must be in the range from 0 to 499 connection intervals.")}if(void 0!==n){if(n<7.5||n>i){throw new Error("The minimum connection interval must be greater than 7.5 ms and <= maximum interval")}n=Math.round(.8*n)}if(void 0!==i){if(i>4e3||i<n){throw new Error("The minimum connection interval must be less than 4 000 ms and >= minimum interval")}i=Math.round(.8*i)}const a=await this._read(!0),o=!0;if(n=n||a.getUint16(0,o),i=i||a.getUint16(2,o),r=r||a.getUint16(4,o),4*(t=t||a.getUint16(6,o))<(1+r)*i){throw new Error("The supervision timeout in milliseconds must be greater than (1 + slaveLatency) * maxConnInterval * 2, where maxConnInterval is also given in milliseconds.")}const s=new Uint8Array(8);for(let e=0;e<s.length;e++)s[e]=a.getUint8(e);return s[0]=255&n,s[1]=n>>8&255,s[2]=255&i,s[3]=i>>8&255,s[4]=255&r,s[5]=r>>8&255,s[6]=255&t,s[7]=t>>8&255,s}catch(t){throw t}}};var se=class extends V{constructor(e){super(e,"firmware"),this.service={uuid:this.device.TCS_UUID},this.characteristic={uuid:this.device.TCS_FW_VER_UUID,decoder:this.decodeFirmwareVersion.bind(this)}}decodeFirmwareVersion(e){try{return{firmware:`v${e.getUint8(0)}.${e.getUint8(1)}.${e.getUint8(2)}`}}catch(t){throw t}}};var ce=class extends V{constructor(e){super(e,"gas"),this.service={uuid:this.device.TES_UUID},this.characteristic={uuid:this.device.TES_GAS_UUID,decoder:this.decodeGasData.bind(this)}}decodeGasData(e){try{const t=!0;return{eCO2:{value:e.getUint16(0,t),unit:"ppm"},TVOC:{value:e.getUint16(2,t),unit:"ppb"}}}catch(t){throw t}}};var de=class extends V{constructor(e){super(e,"gravityvector"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_GRAVITY_UUID,decoder:this.decodeGravityVectorData.bind(this)}}decodeGravityVectorData(e){try{return{value:{x:e.getFloat32(0,!0),y:e.getFloat32(4,!0),z:e.getFloat32(8,!0)}}}catch(t){throw t}}};var _e=class extends V{constructor(e){super(e,"humidity"),this.service={uuid:this.device.TES_UUID},this.characteristic={uuid:this.device.TES_HUMIDITY_UUID,decoder:this.decodeHumidityData.bind(this)}}decodeHumidityData(e){try{return{value:e.getUint8(0),unit:"%"}}catch(t){throw t}}};var ue=class extends V{constructor(e){super(e,"stepcounter"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_STEP_UUID,decoder:this.decodeStepData.bind(this)}}decodeStepData(e){try{const t=!0;return{count:e.getUint32(0,t),time:{value:e.getUint32(4,t),unit:"ms"}}}catch(t){throw t}}};var he=class extends V{constructor(e){super(e,"rawdata"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_RAW_UUID,decoder:this.decodeRawDataData.bind(this)}}decodeRawDataData(e){try{const t=!0;return{accelerometer:{x:e.getInt16(0,t)/64,y:e.getInt16(2,t)/64,z:e.getInt16(4,t)/64,unit:"G"},gyroscope:{x:e.getInt16(6,t)/2048,y:e.getInt16(8,t)/2048,z:e.getInt16(10,t)/2048,unit:"deg/s"},compass:{x:e.getInt16(12,t)/4096,y:e.getInt16(14,t)/4096,z:e.getInt16(16,t)/4096,unit:"microTesla"}}}catch(t){throw t}}};var le=class extends V{constructor(e){super(e,"eulerorientation"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_EULER_UUID,decoder:this.decodeEulerData.bind(this)}}decodeEulerData(e){try{const t=!0;return{roll:e.getInt32(0,t)/65536,pitch:e.getInt32(4,t)/65536,yaw:e.getInt32(8,t)/65536}}catch(t){throw t}}};var ge=class extends V{constructor(e){super(e,"rotationmatrixorientation"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_ROT_MATRIX_UUID,decoder:this.decodeRotationData.bind(this)}}decodeRotationData(e){try{return{row1:[e.getInt16(0,!0)/4,e.getInt16(0,!0)/4,e.getInt16(0,!0)/4],row2:[e.getInt16(0,!0)/4,e.getInt16(0,!0)/4,e.getInt16(0,!0)/4],row3:[e.getInt16(0,!0)/4,e.getInt16(0,!0)/4,e.getInt16(0,!0)/4]}}catch(t){throw t}}};var Ee=class extends V{constructor(e){super(e,"heading"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_HEADING_UUID,decoder:this.decodeHeadingData.bind(this)}}decodeHeadingData(e){try{const t=!0;return{heading:e.getInt32(0,t)/65536}}catch(t){throw t}}};var me=class extends V{constructor(e){super(e,"eddystone"),this.service={uuid:this.device.TCS_UUID},this.characteristic={uuid:this.device.TCS_EDDYSTONE_UUID,decoder:this.decodeEddystoneData.bind(this),encoder:this.encodeEddystoneData.bind(this)}}decodeEddystoneData(e){try{const t=[".com/",".org/",".edu/",".net/",".info/",".biz/",".gov/",".com",".org",".edu",".net",".info",".biz",".gov"],r=["http://www.","https://www.","http://","https://"][e.getUint8(0)];let n=(new TextDecoder).decode(e);return n=r+n.slice(1),t.forEach((e,r)=>{-1!==n.indexOf(String.fromCharCode(r))&&(n=n.replace(String.fromCharCode(r),t[r]))}),new URL(n)}catch(t){throw t}}encodeEddystoneData(e){try{const t=new URL(e),r=["http://www.","https://www.","http://","https://"],n=[".com/",".org/",".edu/",".net/",".info/",".biz/",".gov/",".com",".org",".edu",".net",".info",".biz",".gov"];let i=null,a=null,o=t.href,s=o.length;if(r.forEach((e,r)=>{-1!==t.href.indexOf(e)&&null===i&&(i=String.fromCharCode(r),o=o.replace(e,i),s-=e.length)}),n.forEach((e,r)=>{-1!==t.href.indexOf(e)&&null===a&&(a=String.fromCharCode(r),o=o.replace(e,a),s-=e.length)}),s<1||s>14){throw new Error('The URL can\'t be longer than 14 characters, excluding URL scheme such as "https://" and ".com/".')}const c=new Uint8Array(o.length);for(let e=0;e<o.length;e++)c[e]=o.charCodeAt(e);return c}catch(t){throw t}}};var pe=class extends V{constructor(e){super(e,"environmentconfiguration"),this.service={uuid:this.device.TES_UUID},this.characteristic={uuid:this.device.TES_CONFIG_UUID,decoder:this.decodeConfigData.bind(this),encoder:this.encodeConfigData.bind(this)}}decodeConfigData(e){try{const t=!0,r=e.getUint16(0,t),n=e.getUint16(2,t),i=e.getUint16(4,t),a=e.getUint16(6,t);let o=e.getUint8(8);const s=e.getUint8(9),c=e.getUint8(10),d=e.getUint8(11);return 1===o?o=1:2===o?o=10:3===o&&(o=60),{temperatureInterval:r,pressureInterval:n,humidityInterval:i,colorInterval:a,gasInterval:o,colorSensorCalibration:{red:s,green:c,blue:d}}}catch(t){throw t}}async encodeConfigData(e){try{if("object"!==typeof e)return Promise.reject(new TypeError("The argument has to be an object."));if(void 0===e.temperatureInterval&&void 0===e.pressureInterval&&void 0===e.humidityInterval&&void 0===e.colorInterval&&void 0===e.gasInterval&&void 0===e.colorSensorCalibration)return Promise.reject(new TypeError("The argument has to be an object with at least one of the properties 'temperatureInterval', 'pressureInterval', 'humidityInterval', 'colorInterval', 'gasInterval' or 'colorSensorCalibration'."));let t=e.temperatureInterval,r=e.pressureInterval,n=e.humidityInterval,i=e.colorInterval,a=e.gasInterval;const o=e.colorSensorCalibration;if(void 0!==t&&(t<100||t>6e4))return Promise.reject(new RangeError("The temperature sensor sampling interval must be in the range 100 ms - 60 000 ms"));if(void 0!==r&&(r<50||r>6e4))return Promise.reject(new RangeError("The pressure sensor sampling interval must be in the range 50 ms - 60 000 ms"));if(void 0!==n&&(n<100||n>6e4))return Promise.reject(new RangeError("The humidity sensor sampling interval must be in the range 100 ms - 60 000 ms"));if(void 0!==i&&(i<200||i>6e4))return Promise.reject(new RangeError("The color sensor sampling interval must be in the range 200 ms - 60 000 ms"));if(void 0!==a)if(1===a)a=1;else if(10===a)a=2;else{if(60!==a){throw new RangeError("The gas sensor sampling interval has to be 1, 10 or 60 seconds.")}a=3}let s,c,d;if(void 0!==o){if("object"!==typeof o)return Promise.reject(new TypeError("The colorSensorCalibration argument has to be an object."));if(void 0===o.red||void 0===o.green||void 0===o.blue)return Promise.reject(new TypeError("The colorSensorCalibration argument has to be an object with the properties red, green and blue."));s=o.red,c=o.green,d=o.blue}const _=await this._read(!0),u=!0;t=t||_.getUint16(0,u),r=r||_.getUint16(2,u),n=n||_.getUint16(4,u),i=i||_.getUint16(6,u),a=a||_.getUint8(8),s=s||_.getUint8(9),c=c||_.getUint8(10),d=d||_.getUint8(11);const h=new Uint8Array(12);for(let e=0;e<h.length;e++)h[e]=_.getUint8(e);return h[0]=255&t,h[1]=t>>8&255,h[2]=255&r,h[3]=r>>8&255,h[4]=255&n,h[5]=n>>8&255,h[6]=255&i,h[7]=i>>8&255,h[8]=a,h[9]=s,h[10]=c,h[11]=d,h}catch(t){throw t}}};var fe=class extends V{constructor(e){super(e,"motionconfiguration"),this.service={uuid:this.device.TMS_UUID},this.characteristic={uuid:this.device.TMS_CONFIG_UUID,decoder:this.decodeConfigData.bind(this),encoder:this.encodeConfigData.bind(this)}}decodeConfigData(e){try{const t=!0;return{stepCounterInterval:e.getUint16(0,t),tempCompensationInterval:e.getUint16(2,t),magnetCompInterval:e.getUint16(4,t),motionProcessFrequency:e.getUint16(6,t),wakeOnMotion:e.getUint8(8)}}catch(t){throw t}}async encodeConfigData(e){try{if("object"!==typeof e)return Promise.reject(new TypeError("The argument has to be an object."));if(void 0===e.stepCounterInterval&&void 0===e.tempCompensationInterval&&void 0===e.magnetCompInterval&&void 0===e.motionProcessFrequency&&void 0===e.wakeOnMotion)return Promise.reject(new TypeError("The argument has to be an object with at least one of the properties 'stepCounterInterval', 'tempCompensationInterval', 'magnetCompInterval', 'motionProcessFrequency' or 'wakeOnMotion'."));let t=e.stepCounterInterval,r=e.tempCompensationInterval,n=e.magnetCompInterval,i=e.motionProcessFrequency,a=e.wakeOnMotion;if(void 0!==t&&(t<100||t>5e3))return Promise.reject(new RangeError("The step counter interval must be in the range 100 ms - 5000 ms"));if(void 0!==r&&(r<100||r>5e3))return Promise.reject(new RangeError("The temperature compensation interval must be in the range 100 ms - 5000 ms"));if(void 0!==n&&(n<100||n>1e3))return Promise.reject(new RangeError("The magnetometer compensation interval must be in the range 100 ms - 1000 ms"));if(void 0!==i&&(i<5||i>200))return Promise.reject(new RangeError("The motion processing unit frequency must be in the range 5 hz - 200 hz"));if(void 0!==a){if("boolean"!==typeof a)return Promise.reject(new RangeError("The argument must be true or false."));a=a?1:0}const o=await this._read(!0),s=!0;t=t||o.getUint16(0,s),r=r||o.getUint16(2,s),n=n||o.getUint16(4,s),i=i||o.getUint16(6,s),void 0===a&&(a=o.getUint8(8));const c=new Uint8Array(9);for(let e=0;e<c.length;e++)c[e]=o.getUint8(e);return c[0]=255&t,c[1]=t>>8&255,c[2]=255&r,c[3]=r>>8&255,c[4]=255&n,c[5]=n>>8&255,c[6]=255&i,c[7]=i>>8&255,c[8]=a,c}catch(t){throw t}}};var ye=class extends V{constructor(e){super(e,"soundconfiguration"),this.service={uuid:this.device.TSS_UUID},this.characteristic={uuid:this.device.TSS_CONFIG_UUID,decoder:this.decodeSoundConfigurationData.bind(this),encoder:this.encodeSoundConfigurationData.bind(this)}}decodeSoundConfigurationData(e){try{return{speakerMode:e.getUint8(0),microphoneMode:e.getUint8(1)}}catch(t){throw t}}async encodeSoundConfigurationData(e){try{if("object"!==typeof e)return Promise.reject(new TypeError("The argument has to be an object."));if(void 0===e.speakerMode&&void 0===e.microphoneMode)return Promise.reject(new TypeError("The argument has to be an object with at least one of the properties speakerMode and microphoneMode."));let t=e.speakerMode,r=e.microphoneMode;if(void 0!==t&&1!==t&&2!==t&&3!==t)return Promise.reject(new RangeError("The speaker mode must be one of the integers 1, 2 or 3."));if(void 0!==r&&1!==r&&2!==r)return Promise.reject(new RangeError("The microphone mode must be one of the integers 1 or 2."));const n=await this._read(!0);t=t||n.getUint8(0),r=r||n.getUint8(1);const i=new Uint8Array(2);for(let e=0;e<i.length;e++)i[e]=n.getUint8(e);return i[0]=255&t,i[1]=255&r,i}catch(t){throw t}}};var be=class extends V{constructor(e){super(e,"speakerdata"),this.service={uuid:this.device.TSS_UUID},this.characteristic={uuid:this.device.TSS_SPEAKER_DATA_UUID,encoder:this.encodeSpeakerData.bind(this)},this.soundconfigurationservice=new ye(this)}async encodeSpeakerData(e){try{if(1===e.mode){const t=new Uint8Array(5),r=e.frequency,n=e.duration,i=e.volume;return t[0]=255&r,t[1]=r>>8&255,t[2]=255&n,t[3]=n>>8&255,t[4]=255&i,t}if(2===e.mode)return e.data;if(3===e.mode){const t=new Uint8Array(1),r=e.sample;return t[0]=255&r,t}}catch(t){throw t}}};var ve=class extends V{constructor(e){super(e,"speakerstatus"),this.service={uuid:this.device.TSS_UUID},this.characteristic={uuid:this.device.TSS_SPEAKER_STAT_UUID,decoder:this.decodeSpeakerStatus.bind(this)}}decodeSpeakerStatus(e){try{return{status:e.getInt8(0)}}catch(t){throw t}}};var we=class extends V{constructor(e){super(e,"battery"),this.service={uuid:"battery_service"},this.characteristic={uuid:"battery_level",decoder:this.decodeBatteryStatus.bind(this)}}decodeBatteryStatus(e){try{return{status:e.getInt8(0)}}catch(t){throw t}}};var De=class extends V{constructor(e){super(e,"dfucontrolpoint_v1"),this.service={uuid:this.device.DFU_UUID},this.characteristic={uuid:this.device.DFU_CTRL_POINT_UUID_VERSION_1,decoder:this.decodeDfuData.bind(this),encoder:this.encodeDfuData.bind(this)}}decodeDfuData(e){try{return{value:e.getUint8(0)}}catch(t){throw t}}encodeDfuData(e){try{const t=new Uint8Array(1);return t[0]=255&e,t}catch(t){throw t}}};var Ue=class extends V{constructor(e){super(e,"dfucontrolpoint_v2"),this.service={uuid:this.device.DFU_UUID},this.characteristic={uuid:this.device.DFU_CTRL_POINT_UUID_VERSION_2,decoder:this.decodeDfuData.bind(this),encoder:this.encodeDfuData.bind(this)}}decodeDfuData(e){try{return{value:e.getUint8(0)}}catch(t){throw t}}encodeDfuData(e){try{const t=new Uint8Array(1);return t[0]=255&e,t}catch(t){throw t}}};var Oe=class extends z{constructor(e={logEnabled:!0}){super(),this.logEnabled=e.logEnabled,this.connected=!1,this.logEnabled&&console.log("I am alive!"),this.TCS_UUID="ef680100-9b35-4933-9b10-52ffa9740042",this.TCS_NAME_UUID="ef680101-9b35-4933-9b10-52ffa9740042",this.TCS_ADV_PARAMS_UUID="ef680102-9b35-4933-9b10-52ffa9740042",this.TCS_CONN_PARAMS_UUID="ef680104-9b35-4933-9b10-52ffa9740042",this.TCS_EDDYSTONE_UUID="ef680105-9b35-4933-9b10-52ffa9740042",this.TCS_CLOUD_TOKEN_UUID="ef680106-9b35-4933-9b10-52ffa9740042",this.TCS_FW_VER_UUID="ef680107-9b35-4933-9b10-52ffa9740042",this.TCS_MTU_REQUEST_UUID="ef680108-9b35-4933-9b10-52ffa9740042",this.TES_UUID="ef680200-9b35-4933-9b10-52ffa9740042",this.TES_TEMP_UUID="ef680201-9b35-4933-9b10-52ffa9740042",this.TES_PRESSURE_UUID="ef680202-9b35-4933-9b10-52ffa9740042",this.TES_HUMIDITY_UUID="ef680203-9b35-4933-9b10-52ffa9740042",this.TES_GAS_UUID="ef680204-9b35-4933-9b10-52ffa9740042",this.TES_COLOR_UUID="ef680205-9b35-4933-9b10-52ffa9740042",this.TES_CONFIG_UUID="ef680206-9b35-4933-9b10-52ffa9740042",this.TUIS_UUID="ef680300-9b35-4933-9b10-52ffa9740042",this.TUIS_LED_UUID="ef680301-9b35-4933-9b10-52ffa9740042",this.TUIS_BTN_UUID="ef680302-9b35-4933-9b10-52ffa9740042",this.TUIS_PIN_UUID="ef680303-9b35-4933-9b10-52ffa9740042",this.TMS_UUID="ef680400-9b35-4933-9b10-52ffa9740042",this.TMS_CONFIG_UUID="ef680401-9b35-4933-9b10-52ffa9740042",this.TMS_TAP_UUID="ef680402-9b35-4933-9b10-52ffa9740042",this.TMS_ORIENTATION_UUID="ef680403-9b35-4933-9b10-52ffa9740042",this.TMS_QUATERNION_UUID="ef680404-9b35-4933-9b10-52ffa9740042",this.TMS_STEP_UUID="ef680405-9b35-4933-9b10-52ffa9740042",this.TMS_RAW_UUID="ef680406-9b35-4933-9b10-52ffa9740042",this.TMS_EULER_UUID="ef680407-9b35-4933-9b10-52ffa9740042",this.TMS_ROT_MATRIX_UUID="ef680408-9b35-4933-9b10-52ffa9740042",this.TMS_HEADING_UUID="ef680409-9b35-4933-9b10-52ffa9740042",this.TMS_GRAVITY_UUID="ef68040a-9b35-4933-9b10-52ffa9740042",this.TSS_UUID="ef680500-9b35-4933-9b10-52ffa9740042",this.TSS_CONFIG_UUID="ef680501-9b35-4933-9b10-52ffa9740042",this.TSS_SPEAKER_DATA_UUID="ef680502-9b35-4933-9b10-52ffa9740042",this.TSS_SPEAKER_STAT_UUID="ef680503-9b35-4933-9b10-52ffa9740042",this.TSS_MIC_UUID="ef680504-9b35-4933-9b10-52ffa9740042",this.DFU_UUID="0000fe59-0000-1000-8000-00805f9b34fb",this.DFU_CTRL_POINT_UUID_VERSION_1="8ec90001-f315-4f60-9fb8-838830daea50",this.DFU_CTRL_POINT_UUID_VERSION_2="8ec90003-f315-4f60-9fb8-838830daea50",this.serviceUUIDs=["battery_service",this.TCS_UUID,this.TES_UUID,this.TUIS_UUID,this.TMS_UUID,this.TSS_UUID,this.DFU_UUID],this.addEventListener("gattavailable",this.executeQueuedOperations.bind(this)),this.addEventListener("operationqueued",this.executeQueuedOperations.bind(this)),this.advertisingparameters=new Q(this),this.microphone=new J(this),this.mtu=new Y(this),this.name=new H(this),this.temperature=new Z(this),this.pressure=new X(this),this.led=new $(this),this.tap=new ee(this),this.absoluteorientation=new te(this),this.quaternionorientation=new re(this),this.button=new ne(this),this.cloudtoken=new ie(this),this.color=new ae(this),this.connectionparameters=new oe(this),this.eddystone=new me(this),this.firmware=new se(this),this.gas=new ce(this),this.gravityvector=new de(this),this.humidity=new _e(this),this.stepcounter=new ue(this),this.rawdata=new he(this),this.eulerorientation=new le(this),this.rotationmatrixorientation=new ge(this),this.heading=new Ee(this),this.environmentconfiguration=new pe(this),this.motionconfiguration=new fe(this),this.soundconfiguration=new ye(this),this.speakerdata=new be(this),this.speakerstatus=new ve(this),this.battery=new we(this),this.dfucontrolpoint_v1=new De(this),this.dfucontrolpoint_v2=new Ue(this)}getStoredThingyName(){try{return localStorage.getItem("thingyName")}catch(e){return}}async connect(){try{const e=this.getStoredThingyName(),t=[];return e?(t.push({name:e}),this.logEnabled&&console.log(`Scanning for devices with name equal to ${e}`)):(t.push({services:[this.TCS_UUID]}),this.logEnabled&&console.log(`Scanning for devices with service UUID equal to ${this.TCS_UUID}`)),this.device=await navigator.bluetooth.requestDevice({filters:t,optionalServices:this.serviceUUIDs}),this.device.addEventListener("gattserverdisconnected",this.onDisconnected.bind(this)),this.setConnected(!0),this.logEnabled&&console.log(`Found Thingy named "${this.device.name}", trying to connect`),this.server=await this.device.gatt.connect(),this.thingyController=new F(this),this.utilities=new G(this),this.logEnabled&&console.log(`Connected to "${this.device.name}"`),!0}catch(e){return this.setConnected(!1),"utilities"in this&&this.utilities.processEvent("error","thingy",e),!1}}async executeQueuedOperations(){try{if(!this.thingyController.getExecutingQueuedOperations()&&0!==this.thingyController.getNumQueuedOperations()&&this.thingyController.getGattStatus()){this.thingyController.setExecutingQueuedOperations(!0);const e={};let t,r=0,n=0;for(;0!==this.thingyController.getNumQueuedOperations()&&this.getConnected();){n=this.thingyController.getNumExecutedOperations()-r,r=this.thingyController.getNumExecutedOperations(),(t=this.thingyController.dequeue()).feature in e||(e[t.feature]={}),t.method in e[t.feature]||(e[t.feature][t.method]=0),e[t.feature][t.method]++;const i=await t.f();if(10===e[t.feature][t.method]&&!0!==i&&(this.thingyController.removeQueuedOperation(t),this.utilities.processEvent("operationdiscarded","thingy",t)),e[t.feature][t.method]>=3&&!0!==i&&n<2){if(1===n){const e=this.thingyController.getExecutedOperation(this.thingyController.getNumExecutedOperations()-1);if(e.feature!==t.feature||e.method!==t.method)continue}this.thingyController.removeQueuedOperation(t),this.utilities.processEvent("operationdiscarded","thingy",t)}}this.thingyController.setExecutingQueuedOperations(!1)}}catch(e){this.thingyController.setExecutingQueuedOperations(!1),this.utilities.processEvent("error","thingy",e)}}getConnected(){return this.connected}setConnected(e){this.connected=e}resetDeviceProperties(){this.setConnected(!1),this.thingyController.terminate()}onDisconnected({target:e}){this.getConnected()?(this.resetDeviceProperties(),this.utilities.processEvent("disconnected","thingy")):this.logEnabled&&console.log(`Disconnected from device named ${e.name}`)}async disconnect(){try{return this.resetDeviceProperties(),await this.device.gatt.disconnect(),!0}catch(e){return this.utilities.processEvent("error","thingy",e),!1}}},Ce=r(51),Ie=r(111),Te=r.n(Ie),Pe=r(110),Me=r.n(Pe);const Se=Object(_.a)(e=>({btIconConnect:{color:"#1976d2"},btIconDisconnect:{color:"#f00"}})),Ae=new Oe({logEnabled:!0});function ke(e){const t=Se();const r=e.connected?"Roz\u0142\u0105cz urz\u0105dzenie":"Po\u0142\u0105cz z urz\u0105dzeniem",n=e.connected?i.a.createElement(Me.a,{className:t.btIconDisconnect}):i.a.createElement(Te.a,{className:t.btIconConnect});return i.a.createElement("div",null,i.a.createElement(Ce.a,{fullWidth:!0,onClick:async function(){if(e.connected)e.onConnectionEvent(!1),e.disconnect();else try{await window.thingy.connect()&&e.onConnectionEvent(!0)}catch(t){e.notifyError(t)}},startIcon:n},r))}window.thingy=Ae;var Re=r(118),Le=r.n(Re),xe=r(112),Be=r.n(xe),We=r(113),je=r.n(We),Ne=r(114),Ke=r.n(Ne),qe=r(115),ze=r.n(qe),Ge=r(116),Fe=r.n(Ge),Ve=r(117),Qe=r.n(Ve);function Je(e){return Ye(e.batteryLevel)}const Ye=e=>e<=20?i.a.createElement(Be.a,null):e<=30?i.a.createElement(je.a,null):e<=50?i.a.createElement(Ke.a,null):e<=60?i.a.createElement(ze.a,null):e<=80?i.a.createElement(Fe.a,null):e<=90?i.a.createElement(Qe.a,null):i.a.createElement(Le.a,null);var He=r(29),Ze=r(217),Xe=r(218);var $e=Object(d.b)(({thingy:e})=>({connected:e.connected.reading,name:e.name.reading.name,firmware:e.firmware.reading.firmware,notification:e.notification,batteryLevel:e.battery.reading.status}),e=>({onConnectionEvent:t=>{e(N(t))},readName:()=>{e(W("name"))},readFirmware:()=>{e(W("firmware"))},disconnect:()=>{e(async e=>{await window.thingy.disconnect(),e({type:"CLEAN_THE_SLATE"})})},startDisconnectNotification:()=>{e(async e=>{window.thingy.addEventListener("disconnected",async t=>{await window.thingy.disconnect(),e({type:"CLEAN_THE_SLATE"}),e(N(!1)),e(L({message:"Lost connection to your device. Please try to reconnect",category:"error"}))})})},startErrorNotification:()=>{e(async(e,t)=>{window.thingy.addEventListener("error",r=>{void 0!==r.detail?t().thingy.connected.reading&&e(L({message:r.detail.body.message,category:"error"})):e(L({message:String(r),category:"error"}))})})},startWriteNotification:()=>{e(async e=>{window.thingy.addEventListener("write",t=>{const r=["name","advertisingparameters","connectionparameters","eddystone","cloudtoken","environmentconfiguration","motionconfiguration"];t.detail&&r.includes(t.detail.feature)&&e(L({message:"Success",category:"success"}))})})},startBatteryNotification:()=>{e(async e=>{window.thingy.addEventListener("battery",t=>{e(k("battery",t))});const t=await window.thingy.battery.read();e(A("battery",t)),await window.thingy.battery.start()})},notifyError:t=>{e((e=>t=>{t(L({message:String(e),category:"error"}))})(t))}}))((function(e){const t=Object(He.useSnackbar)().enqueueSnackbar,r=i.a.createElement(ke,{onConnectionEvent:function(r){e.onConnectionEvent(r),r?(e.readName(),e.readFirmware(),t("Thingy po\u0142\u0105czone!",{variant:"success"}),e.startErrorNotification(),e.startDisconnectNotification(),e.startWriteNotification(),e.startBatteryNotification()):t("Thingy roz\u0142\u0105czone!")},disconnect:e.disconnect,notifyError:e.notifyError,connected:e.connected});if(!e.connected)return r;const n=e.name&&e.firmware&&e.batteryLevel?i.a.createElement(g.a,null,i.a.createElement(Ze.a,null,i.a.createElement(Xe.a,null,i.a.createElement(Je,{className:"battery",batteryLevel:e.batteryLevel}))),i.a.createElement(m.a,{primary:e.name,secondary:`${e.firmware} / bateria: ${e.batteryLevel}%`})):null;return i.a.createElement("div",null,n,r)}));const et=Object(_.a)(e=>({root:{display:"flex"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,backgroundColor:e.palette.background.darker},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default}}));var tt=Object(d.b)(({thingy:e})=>({isConnected:e.connected.reading}))((function(e){const t=et(),r=e.isConnected,n=e.challenges,a=i.a.createElement(C.c,null,n.map(e=>i.a.createElement(C.a,{exact:!0,key:e.path,path:e.path,component:e.component})));return i.a.createElement("div",{className:t.root},i.a.createElement(O.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper}},i.a.createElement(U,{items:n}),i.a.createElement($e,null)),i.a.createElement("main",{className:t.content},r?a:i.a.createElement(S,null)))})),rt=r(68),nt=r(62);var it=Object(nt.a)({palette:{primary:{main:"#3f51b5"},secondary:{main:"#ffff02"},error:{main:rt.a.A400},background:{darker:"#f2f2f2"}}}),at=r(40),ot=r(119);function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(r,!0).forEach((function(t){Object(u.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const dt={connected:{reading:!1},temperature:{status:!1,reading:void 0},pressure:{status:!1,reading:void 0},co2:{status:!1,reading:void 0},tvoc:{status:!1,reading:void 0},humidity:{status:!1,reading:void 0},color:{status:!1,reading:void 0},stepcounter:{status:!1,reading:{count:0,time:{unit:"ms",value:0}}},tap:{status:!1,reading:{direction:0,count:0}},gravityvector:{status:!1,reading:{value:{x:0,y:0,z:0}}},heading:{status:!1,reading:{heading:0}},quaternionorientation:{status:!1,reading:{x:0,y:0,z:0,w:0}},led:{reading:{mode:-1}},button:{status:!1,reading:{value:0}},firmware:{reading:{firmware:""}},name:{reading:{name:""}},advertisingparameters:{reading:{interval:0,timeout:0}},connectionparameters:{reading:{minInterval:8,maxInterval:4e3,slaveLatency:0,timeout:100}},eddystone:{reading:{href:""}},cloudtoken:{reading:{token:""}},environmentconfiguration:{reading:{temperatureInterval:0,pressureInterval:0,humidityInterval:0,colorInterval:0,gasInterval:1,colorSensorCalibration:{blue:0,green:0,red:0}}},motionconfiguration:{reading:{stepCounterInterval:0,tempCompensationInterval:0,magnetCompInterval:0,motionProcessFrequency:0,wakeOnMotion:0}},samples:{reading:void 0},tones:{reading:void 0},pcm:{reading:{playStatus:0}},microphone:{reading:void 0,status:!1},battery:{reading:{status:100}}};var _t=Object(at.c)({thingy:(e=dt,t)=>{switch(t.type){case"RECEIVE_NEW_READING":return ct({},e,{[t.reading.feature]:ct({},e[t.reading.feature],{reading:t.reading.reading})});case"RECEIVE_NEW_NOTIFY_READING":return"gas"===t.reading.feature?ct({},e,{co2:ct({},e.co2,{reading:e.co2.status?t.reading.reading.detail.eCO2:e.co2.reading}),tvoc:ct({},e.tvoc,{reading:e.tvoc.status?t.reading.reading.detail.TVOC:e.tvoc.reading})}):ct({},e,{[t.reading.feature]:ct({},e[t.reading.feature],{reading:t.reading.reading.detail})});case"NOTIFY_FEATURE_STATUS":return ct({},e,{[t.status.feature]:ct({},e[t.status.feature],{status:t.status.status})});case"CLEAN_THE_SLATE":return dt;case"NOTIFY_USER":return ct({},e,{notification:t.message});case"SET_FEATURE_HAS_EVENT_LISTENER":return ct({},e,{[t.feature]:ct({},e[t.feature],{hasEventListener:!0})});default:return e}}});const ut=e=>{let t;switch(e){case 1:t={red:255,green:0,blue:0};break;case 2:t={red:0,green:128,blue:0};break;case 3:t={red:255,green:255,blue:0};break;case 4:t={red:0,green:0,blue:255};break;case 5:t={red:128,green:0,blue:128};break;case 6:t={red:0,green:255,blue:255};break;case 7:t={red:255,green:255,blue:255};break;default:t={red:0,green:255,blue:255}}return t},ht=e=>{let t;switch(!0){case 255===e.red&&0===e.green&&0===e.blue:t=1;break;case 0===e.red&&128===e.green&&0===e.blue:t=2;break;case 255===e.red&&255===e.green&&0===e.blue:t=3;break;case 0===e.red&&0===e.green&&255===e.blue:t=4;break;case 128===e.red&&0===e.green&&128===e.blue:t=5;break;case 0===e.red&&255===e.green&&255===e.blue:t=6;break;case 255===e.red&&255===e.green&&255===e.blue:t=7;break;default:t=void 0}return t},lt=e=>i.a.createElement("div",{className:"card_led_view"},i.a.createElement("div",{className:"led_modes"},i.a.createElement("button",{type:"button",className:"led_mode_button button_blue",value:"constant",disabled:1===e.feature.reading.mode,onClick:e.changeMode},"Sta\u0142e"),i.a.createElement("button",{type:"button",className:"led_mode_button button_blue",value:"breathe",disabled:2===e.feature.reading.mode,onClick:e.changeMode},"Pulsuj\u0105ce"),i.a.createElement("button",{type:"button",className:"led_mode_button button_blue",value:"oneshot",disabled:3===e.feature.reading.mode,onClick:e.changeMode},"Jednorazowe"),i.a.createElement("button",{type:"button",className:"led_mode_button button_blue",value:"off",disabled:0===e.feature.reading.mode,onClick:e.changeMode},"Wy\u0142\u0105cz")),i.a.createElement("div",{className:"led_colorpicker"},i.a.createElement("div",null,i.a.createElement("button",{type:"button",className:"button red",value:"1",disabled:0===e.feature.reading.mode||1===e.feature.reading.mode&&1===ht({red:e.feature.reading.r,green:e.feature.reading.g,blue:e.feature.reading.b})||[2,3].includes(e.feature.reading.mode)&&1===e.feature.reading.color,onClick:e.changeColor}),i.a.createElement("button",{type:"button",className:"button green",value:"2",disabled:0===e.feature.reading.mode||1===e.feature.reading.mode&&2===ht({red:e.feature.reading.r,green:e.feature.reading.g,blue:e.feature.reading.b})||[2,3].includes(e.feature.reading.mode)&&2===e.feature.reading.color,onClick:e.changeColor}),i.a.createElement("button",{type:"button",className:"button yellow",value:"3",disabled:0===e.feature.reading.mode||1===e.feature.reading.mode&&3===ht({red:e.feature.reading.r,green:e.feature.reading.g,blue:e.feature.reading.b})||[2,3].includes(e.feature.reading.mode)&&3===e.feature.reading.color,onClick:e.changeColor}),i.a.createElement("button",{type:"button",className:"button blue",value:"4",disabled:0===e.feature.reading.mode||1===e.feature.reading.mode&&4===ht({red:e.feature.reading.r,green:e.feature.reading.g,blue:e.feature.reading.b})||[2,3].includes(e.feature.reading.mode)&&4===e.feature.reading.color,onClick:e.changeColor})),i.a.createElement("div",null,i.a.createElement("button",{className:"button purple",value:"5",disabled:0===e.feature.reading.mode||1===e.feature.reading.mode&&5===ht({red:e.feature.reading.r,green:e.feature.reading.g,blue:e.feature.reading.b})||[2,3].includes(e.feature.reading.mode)&&5===e.feature.reading.color,onClick:e.changeColor}),i.a.createElement("button",{className:"button cyan",value:"6",disabled:0===e.feature.reading.mode||1===e.feature.reading.mode&&6===ht({red:e.feature.reading.r,green:e.feature.reading.g,blue:e.feature.reading.b})||[2,3].includes(e.feature.reading.mode)&&6===e.feature.reading.color,onClick:e.changeColor}),i.a.createElement("button",{className:"button white",value:"7",disabled:0===e.feature.reading.mode||1===e.feature.reading.mode&&7===ht({red:e.feature.reading.r,green:e.feature.reading.g,blue:e.feature.reading.b})||[2,3].includes(e.feature.reading.mode)&&7===e.feature.reading.color,onClick:e.changeColor}))));r(157);var gt=r(30);function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(r,!0).forEach((function(t){Object(u.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class pt extends i.a.Component{constructor(e){super(e),this.state={led:e.led},this.changeTab=e.changeTab,this.changeColor=this.changeColor.bind(this),this.changeMode=this.changeMode.bind(this),this.shutdown=e.shutdown}componentWillReceiveProps(e){e.button!==this.state.button&&this.setState(t=>mt({},t,{button:e.button})),e.led!==this.state.led&&this.setState(t=>mt({},t,{led:e.led}))}componentDidMount(){this.props.startUiFeatures()}changeColor(e){this.props.writeLedColor(parseInt(e.target.value,10),this.state.led.reading)}changeMode(e){this.props.writeLedMode(e.target.value,this.state.led.reading)}render(){return i.a.createElement("div",{className:"content"},i.a.createElement(gt.a,{text:"Dioda"}),i.a.createElement(lt,{feature:this.state.led,changeColor:this.changeColor,changeMode:this.changeMode}))}}var ft=pt;Object(d.b)(({thingy:e})=>({led:e.led}),e=>({startUiFeatures:()=>{e(W("led"))},writeLedColor:(t,r)=>{let n;switch(r.mode){case 0:n="off";break;case 1:n="constant";break;case 2:n="breathe";break;case 3:n="oneshot";break;default:n="breathe"}const i=ut(t),a=i.red,o=i.green,s=i.blue,c=r.delay||3500,d={mode:n,color:t,intensity:r.intensity,delay:c,red:a,green:o,blue:s};console.log({params:d}),e(j("led",d))},writeLedMode:(t,r)=>{let n;n=1===r.mode?ht({red:r.r,green:r.g,blue:r.b}):r.color||6;const i=r.delay||1e3,a=r.intensity||20,o=ut(n),s=o.red,c=o.green,d=o.blue;e(j("led",{mode:t,color:n,intensity:a,delay:i,red:s,green:c,blue:d}))}}))(ft);var yt=r(121);var bt=Object(d.b)(({thingy:e})=>({connected:e.connected.reading,buttonPressed:e.button.reading.value,led:e.led}),e=>({onStart:()=>{e(W("led")),e(x("button","on"))},writeLedColor:(t,r)=>{let n;switch(r.mode){case 0:n="off";break;case 1:n="constant";break;case 2:n="breathe";break;case 3:n="oneshot";break;default:n="breathe"}const i=ut(t),a=i.red,o=i.green,s=i.blue,c=r.delay||3500,d={mode:n,color:t,intensity:r.intensity,delay:c,red:a,green:o,blue:s};console.log({params:d}),e(j("led",d))}}))(yt.a),vt=r(123);var wt=Object(d.b)(({thingy:e})=>({connected:e.connected.reading,buttonPressed:e.button.reading.value,tapDirection:e.tap.reading.direction,tapCount:e.tap.reading.count}),e=>({onStart:()=>{e(x("button","on")),e(x("tap","on"))},onEnd:()=>{}}))(vt.a),Dt=r(124);var Ut=Object(d.b)(({thingy:e})=>({connected:e.connected.reading,gravity:e.gravityvector.reading.value}),e=>({onStart:()=>{e(x("button","on")),e(x("gravityvector","on"))},onEnd:()=>{e(x("gravityvector","off"))}}))(Dt.a);var Ot=[{path:"/sensors",component:Object(d.b)(({thingy:e})=>({buttonPressed:e.button.reading.value,tapDirection:e.tap.reading.direction,tapCount:e.tap.reading.count}),e=>({onStart:()=>{e(x("button","on")),e(x("tap","on"))}}))((function(e){return Object(n.useEffect)(()=>{e.onStart()}),i.a.createElement(n.Fragment,null,i.a.createElement(gt.a,{text:"Sensory"}))})),primary:"Zadanie #1",secondary:"Czujniki"},{path:"/lights",component:bt,primary:"Zadanie #2",secondary:"\u015awiat\u0142o i d\u017awi\u0119k"},{path:"/dino",component:wt,primary:"Zadanie #3",secondary:"Gra: Skacz\u0105cy Dinozaur"},{path:"/ball",component:Ut,primary:"Zadanie #4",secondary:"Gra: Kulka"}],Ct=r(47);const It=Object(at.d)(_t,Object(at.a)(ot.a));o.a.render(i.a.createElement(c.a,{theme:it},i.a.createElement(s.a,null),i.a.createElement(d.a,{store:It},i.a.createElement(He.SnackbarProvider,{maxSnack:3},i.a.createElement(p.a,{basename:Ct.a},i.a.createElement(tt,{challenges:Ot}))))),document.querySelector("#root"))},30:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(0),i=r.n(n),a=r(120),o=r.n(a),s=r(188),c=r(50),d=r(37);const _=Object(d.a)(e=>({toolbar:{padding:e.spacing(1)}}));function u(e){const t=_();return i.a.createElement(o.a,{position:"static",color:"secondary",className:t.toolbar},i.a.createElement(s.a,null,i.a.createElement(c.a,{variant:"h5"},e.text)))}},46:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(0),i=r.n(n),a=r(122),o=r.n(a);r(183),r(184);function s(e){return i.a.createElement(o.a,Object.assign({placeholder:"Tu wprowad\u017a czarodziejski kod...",mode:"javascript",theme:"github",name:"blah2",width:"100%",height:"300px",fontSize:20,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2}},e))}},47:function(e){e.exports=JSON.parse('{"a":"/thingy-czarodzieje-kodu"}')}},[[132,1,2]]]);
//# sourceMappingURL=main.5e85b1e7.chunk.js.map